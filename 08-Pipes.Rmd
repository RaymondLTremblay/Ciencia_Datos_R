# Pipes


Fecha de la ultima revisión
```{r echo=FALSE}

Sys.Date()
```

***

```{r}
library(tidyverse)
```



El tema proviene de los siguientes sitios.

English:
 <https://r4ds.had.co.nz/pipes.html>
 
Español:
 <https://es.r4ds.hadley.nz/>
 
 
***


## Temas: El paquete "magrittr"

## %>% pipes
 
 
***


## Alternativas a los pipes
 - Pasos intermedios
 - Sobre escribir el original
 


***
## Uso de pipe


***
 
 
 
 
 
 
## %$%
 
```{r}
library(magrittr)

#iris %>%
#  subset(Sepal.Length > mean(Sepal.Length)) |> 
#  cor(Sepal.Length, Sepal.Width)


iris %>%
  subset(Sepal.Length > mean(Sepal.Length)) %$%
 cor(Sepal.Length, Sepal.Width)

iris %>%
  subset(Sepal.Length > mean(Sepal.Length)) |> 
summarize(corr= cor(Sepal.Length, Sepal.Width))

```
 
 
 Otro ejemplo de %$%
 
```{r}
data.frame(z = rnorm(100)) %$% 
  ts.plot(z)

#data.frame(z = rnorm(100)) |>  
#  ts.plot(z)

#Para hacerlo la misma grafico con Tidyverse
z1=data.frame(z = rnorm(100)) 
library(data.table)
z1=data.table(z1)
z1$order= c(1:100)
z1|> 
  ggplot(aes(order, z))+
  geom_line()


```
 
 
## %<>%
  
  Pipe an object forward into a function or call expression and update the lhs object with the resulting value.
  
  lhs %<>% rhs
  
  
 - lhs : An object which serves both as the initial value and as target.

 - rhs : a function call using the magrittr semantics.
 
 
 
```{r}
x <- rnorm(50)

x %<>% abs %>% sort
```
 
## %<>% 
 
 
```{r}

# Example 1
head(iris)

head(iris$Sepal.Length %<>% sqrt)



# Example 2
x <- rnorm(100)
head(x, n=10)
x %<>% 
  abs %>% 
  sort

head(x, 20)
```
 
 
 ***

## %in% 

 - Filter for values specific values within a variable
 
 
```{r}

# Example 1
names(iris)
iris |> 
  filter(Species %in% c("setosa", "virginica")) |> 
  head()





```
 
 

## %T>%

The tee pipe, %T>%, is useful when a series of operations have a function that does not return any value. 

https://stackoverflow.com/questions/61196304/magrittr-tee-pipe-t-equivalent


 
```{r}
rnorm(200) %>%
matrix(ncol = 2) %T>%
plot %>%  # plot usually does not return anything. 
colSums
```
 
 
 
 
 
 
 
 